# Данная папка содержит тесты

**В этом проекте мы пользуемся библиотекой [CxxTest](https://cxxtest.com/)**  
Данная библиотека выбрана по следующим причинам:

* Не нужно ничего встраивать в исходный код
* Не требует установки (можно легко встроить в ваш проект в ветку «test»), ничего не весит
* Не тянет за собой каких-либо сторонних библиотек
* Имеет одно из лучших, на мой взгляд, руководств. Обучение идёт от простого к сложному (с различными примерами и
  картинками))

## О том, как установить фреймворк для тестирования

* Для любителей Unix:
    * `sudo apt-get update`
    * `sudo apt-get install cxxtest`
* Для любителей `macOS` (но я не уверен)
    * brew install cxxtest

## О том, какая у нас структура тестов:

1. Есть отдельная папка `tests`
2. Для каждой компоненты в `tests` есть отдельная папка с тестами, к примеру `tests/server/Net`
3. Для каждого класса `MyClass` нашей программы (того, что лежит в `src`) unit-тесты представлены отдельным
   классом `testMyClass`, название должно начинаться с `test`
4. Долее каждый тест кейс - отдельный метод данного класса

## О том, как запустить тесты:

1. Для того чтобы запустить все тесты в test, просто запускаем файл `tests/run_test_data.bash` (файл проходит по всем папкам и запускает `run_test_data-*.bash` в каждой из папок)
2. Создавая свой файл `testClass.hpp` **не забываем** добавить в `.bash` файл в этой папке код, что позволит компилировать новые тесты   
3. Если данному файлу скормить в качестве аргумента название файла / папки, то будет запущен только данный файл / файлы
   данной папки
    * К сожалению это пока что не работает
4. При желании запустить тесты ручками (настроить свой `.bash` файл) надо:  
(1) запустить генератор кода тестов, (2) скомпилировать полученный код, (3)
   запустить его
    * `cxxtestgen --error-printer -o made-testes.cpp ./my_test_file_name.hpp`
    * `g++-12 made-testes.cpp -o tests -std=c++20`
    * `./tests`

## О том, какая у нас идеология unit-тестирования:

* Тесты должны быть маленькими и быстрыми.
* Тесты должны быть автоматическими.
* Тесты не должны зависеть друг от друга и от порядка их следования.
* Сначала пишем тесты в режиме «чёрного» ящика.
* А затем, в режиме «белого».
* Нашли ошибку – хороший повод для написания теста, воспроизводящую её.
* Структура тестов должна повторять иерархию проекта.
* Для каждого вашего класса заводите отдельный тестовый класс.
* Отделяйте тесты от основного проекта.
* Имейте единую систему для именования тестов (к примеру, для класса `MyClass` тестирующий класс будет носить имя
  `MyClassTest`, а все его методы иметь вид `testThingWeTest()`).

## О том, как написать тест кейс:

**Не забудьте создать свой `.bash` файл с нужными инклбдами, который будет компилировать ваши тесты (см. запуск тестов)
**  
Вы удивитесь, ведь я отправлю вас читать документацию:  
В данной папке лежит файл [CxxTest-guide.pdf](CxxTest-guide.pdf) и в нём скорее всего интересует раздел 3

* Создаём `*.h` файл
* Создаём класс, наследованный от `CxxTest::TestSuite`
* Реализуем методы `testMethod(void)` (ВАЖНО: первое слово должно быть обязательно test – иначе система не признает, как
  тест)
